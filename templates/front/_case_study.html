{% load static %}

<section class="case-study-section">
    <div class="case-study-title-wrapper">
        <h2 class="case-study-title">導入事例</h2>
    </div>
    <p class="case-study-subtitle">様々なお客様がアプリをご活用いただいています</p>
    
    <div class="case-study-carousel-container">
        <div class="case-study-carousel">
            <div class="case-study-slide">
                <div class="case-study-slide-inner">
                    <div class="case-study-content-wrapper">
                        <div class="case-study-mockup">
                            <div class="phone-mockup">
                                <div class="phone-screen">
                                    <img src="{% static 'front/img/top/case_study/saki.jpg' %}" alt="お笑い芸人専用アプリ画面" />
                                </div>
                            </div>
                        </div>
                        <div class="case-study-info">
                            <h3 class="case-study-app-title">お笑い芸人専用アプリ</h3>
                            <p class="case-study-description">
                                お笑い芸人の方々が独自のコンテンツの配信やファンとの交流のために活用しています。お笑いライブの生配信が人気です。
                            </p>
                            <div class="case-study-tags">
                                <span class="case-study-tag">ファン限定コンテンツ</span>
                                <span class="case-study-tag">直接交流</span>
                                <span class="case-study-tag">イベント情報</span>
                            </div>
                            <div class="case-study-platforms">
                                <a href="https://apps.apple.com/us/app/%E3%82%B7%E3%82%A2%E3%82%BF%E3%83%BC%E5%92%B2/id6736638380" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Apple_Store.svg' %}" alt="App Store" class="platform-badge" />
                                </a>
                                <a href="https://play.google.com/store/apps/details?id=jp.accelfan.app.saki" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Google_Play.png' %}" alt="Google Play" class="platform-badge" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="case-study-slide">
                <div class="case-study-slide-inner">
                    <div class="case-study-content-wrapper">
                        <div class="case-study-mockup">
                            <div class="phone-mockup">
                                <div class="phone-screen">
                                    <img src="{% static 'front/img/top/case_study/mimicre.jpg' %}" alt="声優向けファンコミュニティアプリ画面" />
                                </div>
                            </div>
                        </div>
                        <div class="case-study-info">
                            <h3 class="case-study-app-title">声優向けファンコミュニティアプリ</h3>
                            <p class="case-study-description">
                                人気声優がファンとのコミュニケーションや声優を目指している方のオンライン声優ゼミとして活用。オリジナルのコンテンツの配信や1対1でのオンラインレッスンを実現しています。
                            </p>
                            <div class="case-study-tags">
                                <span class="case-study-tag">ボイスコンテンツ</span>
                                <span class="case-study-tag">オンラインゼミ</span>
                                <span class="case-study-tag">ファンコミュニティ</span>
                            </div>
                            <div class="case-study-platforms">
                                <a href="https://apps.apple.com/jp/app/%E3%83%9F%E3%83%9F%E3%82%AF%E3%83%AA%E3%82%A8%E3%82%A4%E3%82%B7%E3%83%A7%E3%83%B3/id6744049279" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Apple_Store.svg' %}" alt="App Store" class="platform-badge" />
                                </a>
                                <a href="https://play.google.com/store/apps/details?id=jp.accelfan.app.mimicreation&pli=1" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Google_Play.png' %}" alt="Google Play" class="platform-badge" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="case-study-slide">
                <div class="case-study-slide-inner">
                    <div class="case-study-content-wrapper">
                        <div class="case-study-mockup">
                            <div class="phone-mockup">
                                <div class="phone-screen">
                                    <img src="{% static 'front/img/top/case_study/kokokara.jpg' %}" alt="習慣化サポートアプリ画面" />
                                </div>
                            </div>
                        </div>
                        <div class="case-study-info">
                            <h3 class="case-study-app-title">習慣化サポートアプリ</h3>
                            <p class="case-study-description">
                                忙しい会社員や子育て中の親が、毎日の短い時間で食事、運動、思考の学びを継続。健康的な習慣を楽しく身につけるやり方を共有しています。
                            </p>
                            <div class="case-study-tags">
                                <span class="case-study-tag">健康習慣</span>
                                <span class="case-study-tag">思考トレーニング</span>
                                <span class="case-study-tag">継続サポート</span>
                            </div>
                            <div class="case-study-platforms">
                                <a href="https://apps.apple.com/jp/app/kokokara/id6478517917" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Apple_Store.svg' %}" alt="App Store" class="platform-badge" />
                                </a>
                                <a href="https://play.google.com/store/apps/details?id=com.kokokaraeshukan" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Google_Play.png' %}" alt="Google Play" class="platform-badge" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="case-study-slide">
                <div class="case-study-slide-inner">
                    <div class="case-study-content-wrapper">
                        <div class="case-study-mockup">
                            <div class="phone-mockup">
                                <div class="phone-screen">
                                    <img src="{% static 'front/img/top/case_study/jomon.jpg' %}" alt="意識覚醒音声アプリ画面" />
                                </div>
                            </div>
                        </div>
                        <div class="case-study-info">
                            <h3 class="case-study-app-title">意識覚醒音声アプリ</h3>
                            <p class="case-study-description">
                                自己探求を求める方々が、音の魔法を通じて表層意識、潜在意識、超意識を統合。本当の使命と才能に目覚め、新時代を自分らしく軽やかに生きる覚醒体験を提供しています。
                            </p>
                            <div class="case-study-tags">
                                <span class="case-study-tag">意識統合</span>
                                <span class="case-study-tag">サウンドセッション</span>
                                <span class="case-study-tag">自己実現</span>
                            </div>
                            <div class="case-study-platforms">
                                <a href="https://apps.apple.com/jp/app/%E7%B8%84%E6%96%87%E7%9E%91%E6%83%B3/id6745329195" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Apple_Store.svg' %}" alt="App Store" class="platform-badge" />
                                </a>
                                <a href="https://play.google.com/store/apps/details?id=com.jomonmeditation.app&pcampaignid=web_share" target="_blank">
                                    <img src="{% static 'front/img/top/case_study/Google_Play.png' %}" alt="Google Play" class="platform-badge" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="case-study-carousel-nav">
            <button class="case-study-nav-button prev">&#10094;</button>
            <button class="case-study-nav-button next">&#10095;</button>
        </div>
    </div>
</section>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        // カルーセル機能
        const carousel = document.querySelector('.case-study-carousel');
        const slides = document.querySelectorAll('.case-study-slide');
        const prevButton = document.querySelector('.case-study-nav-button.prev');
        const nextButton = document.querySelector('.case-study-nav-button.next');
        const carouselContainer = document.querySelector('.case-study-carousel-container');
        
        let currentIndex = 0;
        let autoPlayInterval;
        let isAutoPlaying = true;
        
        function showSlide(index) {
            if (index < 0) {
                currentIndex = slides.length - 1;
            } else if (index >= slides.length) {
                currentIndex = 0;
            } else {
                currentIndex = index;
            }
            
            const offset = -currentIndex * 100;
            carousel.style.transform = `translateX(${offset}%)`;
        }
        
        // 自動再生機能
        function startAutoPlay() {
            stopAutoPlay();
            autoPlayInterval = setInterval(() => {
                if (isAutoPlaying) {
                    showSlide(currentIndex + 1);
                }
            }, 5000); // 5秒ごとに切り替え
        }
        
        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
            }
        }
        
        // 一時的に自動再生を停止し、指定時間後に再開
        function pauseAutoPlayTemporarily(duration = 5000) {
            isAutoPlaying = false;
            stopAutoPlay();
            setTimeout(() => {
                isAutoPlaying = true;
                startAutoPlay();
            }, duration);
        }
        
        // ボタンクリックイベント
        prevButton.addEventListener('click', () => {
            showSlide(currentIndex - 1);
            pauseAutoPlayTemporarily();
        });
        
        nextButton.addEventListener('click', () => {
            showSlide(currentIndex + 1);
            pauseAutoPlayTemporarily();
        });
        
        // タッチスワイプ対応
        let touchStartX = 0;
        let touchEndX = 0;
        
        carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        carousel.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
            pauseAutoPlayTemporarily();
        });
        
        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                showSlide(currentIndex + 1);
            }
            if (touchEndX > touchStartX + 50) {
                showSlide(currentIndex - 1);
            }
        }
        
        // マウスホバー時の自動再生制御
        carouselContainer.addEventListener('mouseenter', () => {
            isAutoPlaying = false;
        });
        
        carouselContainer.addEventListener('mouseleave', () => {
            isAutoPlaying = true;
        });
        
        // ページ非表示時の自動再生停止
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopAutoPlay();
            } else {
                if (isAutoPlaying) {
                    startAutoPlay();
                }
            }
        });
        
        // 自動再生を開始
        startAutoPlay();
        
        // 導入事例セクションのタイトルアニメーション
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        const target = entry.target;
                        target.style.opacity = '1';
                        target.style.transform = 'translateY(0)';
                    }
                });
            },
            { threshold: 0.1 }
        );

        // タイトルのアニメーション設定
        const caseStudyTitle = document.querySelector('.case-study-title');
        if (caseStudyTitle) {
            caseStudyTitle.style.opacity = '0';
            caseStudyTitle.style.transform = 'translateY(20px)';
            caseStudyTitle.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            
            observer.observe(caseStudyTitle);
        }
        
        // サブタイトルのアニメーション設定
        const caseStudySubtitle = document.querySelector('.case-study-subtitle');
        if (caseStudySubtitle) {
            caseStudySubtitle.style.opacity = '0';
            caseStudySubtitle.style.transform = 'translateY(20px)';
            caseStudySubtitle.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            caseStudySubtitle.style.transitionDelay = '200ms';
            
            observer.observe(caseStudySubtitle);
        }
    });
</script>