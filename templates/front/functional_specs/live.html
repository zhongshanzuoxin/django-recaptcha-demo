{% extends 'front/_base.html' %}
{% load static %}

{% block content %}
<div class="functional-spec-container">
    <!-- タイトルセクション -->
    <h1 class="spec-title">ライブ機能の使い方</h1>

     <!-- メイン動画セクション -->
     <div class="spec-video-section">
        <!-- サムネイル表示部分 -->
        <div class="video-thumbnail-container" onclick="openVideoModal()">
            <img class="video-thumbnail" src="{% static 'front/img/top/functional_specs/live.png' %}" alt="ライブ機能の説明動画サムネイル">
            <div class="play-overlay">
                <i class="material-icons">play_arrow</i>
            </div>
        </div>

        <!-- ビデオモーダル -->
        <div class="video-modal" id="videoModal">
            <span class="close-modal" onclick="closeVideoModal()">&times;</span>
            <div class="modal-content">
                <video controls class="modal-video" id="modalVideo">
                    <source src="{% static 'front/video/functional_specs/live.mp4' %}" type="video/mp4">
                    お使いのブラウザは動画の再生に対応していません。
                </video>
            </div>
        </div>
    </div>

    <!-- 機能概要 -->
    <div class="spec-overview">
        <h2>ライブの機能概要</h2>
        <p>ライブ機能を使用すると、ファンとリアルタイムでつながることができます。スケジュールを設定して開始するパターンと、すぐに開始できるパターンの２種類があります。</p>
    </div>

    <!-- 権限表 -->
    <div class="spec-permissions">
        <h2>権限と利用可能な機能</h2>
        <div class="permission-table-wrapper">
            <table class="permission-table">
                <thead>
                    <tr>
                        <th>機能</th>
                        <th>アーティスト</th>
                        <th>スタッフ</th>
                        <th>管理者</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>スケジュールの新規作成</td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                    <tr>
                        <td>スケジュールの編集</td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                    <tr>
                        <td>スケジュールの削除</td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                    <tr>
                        <td>ライブの開始</td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                    <tr>
                        <td>他者が作成したスケジュールの開始・編集・削除</td>
                        <td><span class="unavailable">×</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p class="permission-note">○：利用可能　×：利用不可</p>
    </div>

    <!-- ライブの開始方法セクション -->
    <div class="spec-steps">
        <h2>ライブの開始方法</h2>
        <div class="step-item">
            <h3 data-step="1">ライブ機能にアクセス</h3>
            <p>アプリのフッターメニューから「More」を選択し、「ライブ」をタップします。</p>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_05.png' %}" alt="ステップ1の説明画像" class="step-image">
            </div>
        </div>

        <div class="step-item">
            <h3 data-step="2">ライブ方式の選択と情報の入力</h3>
            <p>ライブを開始する方式には、以下の２種類があります。</p>
            
            <ul class="step-options">
                <li>
                    <span class="option-title">スケジュールから開始：</span>
                    <span class="option-description">事前に設定した日時からライブを開始できます</span>
                </li>
                <li>
                    <span class="option-title">今すぐ始める：</span>
                    <span class="option-description">その場ですぐにライブを開始できます</span>
                </li>
            </ul>

            {% comment %} <div class="info-box">
                <h4>配信者について</h4>
                <p>配信者の選択について、以下の点に注意してください：</p>
                <ul>
                    <li>選択肢として表示されるのは、アーティストフラグが設定されているユーザーのみです</li>
                    <li>配信者を選択できるのは管理者・スタッフのみです</li>
                    <li>配信者は登録後に変更できません</li>
                </ul>
                <p>適切なユーザーが選択できない場合は、管理者にアーティストフラグの設定を依頼してください。</p>
            </div> {% endcomment %}

            <h4 class="mt-4">スケジュール設定の場合</h4>
            <ol class="step-instructions">
                <li>右下の「➕」ボタンをタップ</li>
                <li>必要情報を入力します</li>
                <li>「登録」をタップ</li>
            </ol>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_06.png' %}" alt="ステップ2の説明画像" class="step-image">
            </div>
            
            <h4>今すぐ始めるの場合</h4>
            <ol class="step-instructions">
                <li>「今すぐに開始する」をタップ</li>
                <li>「スタート」をタップ</li>
                <li>必要情報を入力します</li>
            </ol>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_07.png' %}" alt="ステップ2の説明画像" class="step-image">
            </div>

            <h4 style="margin-top: 70px;">入力項目について</h4>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    タイトル
                </div>
                <div class="accordion-content js-details-content">
                    ライブの配信タイトルを入力することができます。<br/>
                    255文字までの入力が可能ですが、長いタイトルは省略して表示される場合がございますのでご注意ください。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    配信者
                </div>
                <div class="accordion-content js-details-content">
                    ライブを配信するアーティストの方を選択します。<br/>
                    選択肢に表示されるのは「アーティスト検索に含める」設定がONになっている方のみです。<br/><br/>

                    <div class="edit-point">※編集では変更できない項目です。</div>
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    公開範囲
                </div>
                <div class="accordion-content js-details-content">
                    公開範囲では、どのファンの方がライブに参加できるかを設定することができます。<br/>
                    3種類の公開範囲が存在します。<br/>
                    &nbsp;1. 全体向け<br/>
                    &nbsp;2. 有料会員向け<br/>
                    &nbsp;3. 個人向け<br/><br/>

                    1の全体向けでは、ゲストの方も含め、全てのファンの方が参加できます。<br/>
                    2の有料会員向けでは、サブスクリプションに登録しているファンの方のみ参加できます。<br/>
                    3の個人向けでは、選択した特定のファンの方のみ参加できます。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    スクリーンショットの許可
                </div>
                <div class="accordion-content js-details-content">
                    こちらの項目では、スクリーンショットできないように設定することができます。<br/>
                    設定をONにすると、スクリーンショットを撮ることができ、OFFにすると撮ることができません。<br/><br/>

                    ONにした場合、スクリーンショットを撮ると黒い画像に置き換わります。<br/>
                    また、画面録画も同様に黒い画面が録画されます。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    アーカイブの保存
                </div>
                <div class="accordion-content js-details-content">
                    アーカイブを保存するかどうかを設定することができます。<br/>
                    設定をONにすると保存され、OFFにすると保存されません。<br/><br/>

                    保存されたアーカイブは、ライブ終了後にコレクションとして表示されます。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    アーカイブ公開開始日時
                </div>
                <div class="accordion-content js-details-content">
                    アーカイブを公開する日時を設定することができます。<br/>
                    この日時を設定していても、設定した時間までにライブが終了していない、アーカイブの保存が終了していない場合には、アーカイブの保存が終了した時点で公開されるようになります。<br/><br/>

                    アーカイブ保存にはライブ終了後15分ほどお時間をいただきます。<br/>
                    ライブを長時間行った際には15分以上お時間がかかる場合がございます。<br/>
                    ご了承ください。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    告知開始日時
                </div>
                <div class="accordion-content js-details-content">
                    ライブの告知を開始する日時を設定することができます。<br/>
                    こちらに設定した日時になりますと、Home画面のPick Upに該当するライブが表示されるようになります。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    告知開始時プッシュ通知
                </div>
                <div class="accordion-content js-details-content">
                    告知を開始した時に、ファンの方に通知をするかどうか設定することができます。<br/>
                    ONにすると通知が送られ、OFFにすると通知は送られません。<br/><br/>

                    <div class="edit-point">※編集では変更できない項目です。</div>
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    ライブ開始日時
                </div>
                <div class="accordion-content js-details-content">
                    配信を開始する日時を設定することができます。
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    ライブ開始時プッシュ通知
                </div>
                <div class="accordion-content js-details-content">
                    配信を開始した時に、ファンの方に通知するかどうかを設定することができます。<br/>
                    ONにすると通知が送られ、OFFにすると通知は送られません。<br/><br/>

                    「今すぐライブを始める」から開始した場合、通知は必ず送られるようになっています。<br/><br/>

                    <div class="edit-point">※編集では変更できない項目です。</div>
                </div>
            </div>
            <div class="accordion js-details">
                <div class="accordion-header js-details-summary">
                    サムネイル画像
                </div>
                <div class="accordion-content js-details-content">
                    Pick Up画面などに表示するための画像を設定することができます。
                    GIFなどは設定できません。
                </div>
            </div>
        </div>

        <div class="step-item">
            <h3 data-step="3">ライブの開始</h3>
            <h4>スケジュール設定の場合</h4>
            <ol class="step-instructions">
                <li>登録したスケジュールをタップ</li>
                <li>「配信画面へ」をタップ</li>
                <li>「スタート」をタップ</li>
            </ol>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_10.png' %}" alt="ステップ3の説明画像" class="step-image">
            </div>
            <h4>今すぐ始めるの場合</h4>
            <ol class="step-instructions">
                <li>「ライブスタート」をタップでライブを開始</li>
            </ol>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_09.png' %}" alt="ステップ3の説明画像" class="step-image">
            </div>
        </div>

        <div class="step-item">
            <h3 data-step="4">ライブの終了</h3>
            <p>ライブを終了する場合は、ライブ画面の右上にある「✖️」ボタンをタップします。</p>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_18.png' %}" alt="ステップ5の説明画像" class="step-image">
            </div>
            <div class="info-box">
                <h4>ライブのアーカイブについて</h4>
                <ul>
                    <li>アーカイブの保存をONにしている場合、ライブ終了後15分以内にコレクションに自動で保存され公開されます。</li>
                    <li>コレクションについては<a href="{% url 'front:collection' %}">こちら</a>からご確認いただけます。</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ライブ配信のヒント -->
    <div class="spec-tips">
        <h3>ライブ配信のヒント</h3>
        <ul>
            <li>定期的にライブスケジュールを設定することで、ファンの期待感を高められます。</li>
            <li>ライブ中はコメントをこまめにチェックし、ファンとの対話を大切にしましょう。</li>
        </ul>
    </div>

    <!-- 機能説明ナビゲーション -->
    <div class="spec-navigation">
        <!-- 前後の記事リンク -->
        <div class="spec-nav-links">
            <a href="{% url 'front:room' %}" class="spec-nav-link prev">
                <span class="nav-label">前の記事</span>
                <span class="nav-title">ルーム機能</span>
            </a>
            <a href="{% url 'front:goods_shop' %}" class="spec-nav-link next">
                <span class="nav-label">次の記事</span>
                <span class="nav-title">ショップ機能（グッズ）</span>
            </a>
        </div>
        {% include 'front/functional_specs/_spec_list.html' %}
    </div>
</div>

{% endblock %}
