{% extends 'front/_base.html' %}
{% load static %}

{% block content %}
<div class="functional-spec-container">
    <!-- タイトルセクション -->
    <h1 class="spec-title">2shot機能の使い方</h1>

    <!-- メイン動画セクション -->
    <div class="spec-video-section">
        <!-- サムネイル表示部分 -->
        <div class="video-thumbnail-container" onclick="openVideoModal()">
            <img class="video-thumbnail" src="{% static 'front/img/top/functional_specs/2shot.png' %}" alt="2shot機能の説明動画サムネイル">
            <div class="play-overlay">
                <i class="material-icons">play_arrow</i>
            </div>
        </div>

        <!-- ビデオモーダル -->
        <div class="video-modal" id="videoModal">
            <span class="close-modal" onclick="closeVideoModal()">&times;</span>
            <div class="modal-content">
                <video controls class="modal-video" id="modalVideo">
                    <source src="{% static 'front/video/functional_specs/2shot.mp4' %}" type="video/mp4">
                    お使いのブラウザは動画の再生に対応していません。
                </video>
            </div>
        </div>
    </div>

    <!-- 機能概要 -->
    <div class="spec-overview">
        <h2>2shotの機能概要</h2>
        <p>2shot機能を使用すると、ファンと一対一でビデオ通話を行うことができます。事前にチケットを販売し、購入したファンとの 個別セッションを実施できます。</p>
    </div>

    <!-- 権限表 -->
    <div class="spec-permissions">
        <h2>権限と利用可能な機能</h2>
        <div class="permission-table-wrapper">
            <table class="permission-table">
                <thead>
                    <tr>
                        <th>機能</th>
                        <th>アーティスト</th>
                        <th>スタッフ</th>
                        <th>管理者</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2shotの開始</td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                    <tr>
                        <td>他者が開催ユーザーの2shotの開始</td>
                        <td><span class="unavailable">×</span></td>
                        <td><span class="available">○</span></td>
                        <td><span class="available">○</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p class="permission-note">○：利用可能　×：利用不可</p>
    </div>

    <!-- 2shotの開始方法セクション -->
    <div class="spec-steps">
        <h2>2shotの始め方</h2>
        <div class="step-item">
            <h3 data-step="1">2shot券の販売</h3>
            <p>2shotを開始する前に、まずショップで2shot券を販売する必要があります。詳細な販売方法については<a href="{% url 'front:2shot_shop' %}">こちら</a>をご覧ください。</p>
        </div>

        <div class="step-item">
            <h3 data-step="2">スケジュールの確認</h3>
            <p>アプリのフッターメニューから「More」を選択し、2shotを選択します。</p>
            <p>2shotスケジュール画面では、予定されている2shotセッションを確認できます。</p>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_13.png' %}" alt="ステップ2の説明画像" class="step-image">
            </div>
            <p class="mt-5">各スケジュールをタップすると、そのセッションの詳細を確認できます。</p>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_14.png' %}" alt="ステップ2の説明画像" class="step-image">
            </div>
            
            <div class="info-box">
                <h4>スケジュール一覧のユーザー表示について</h4>
                <p>ユーザーの状態によって、表示が以下のように変化します：</p>
                <ul>
                    <li>終了済みのセッション：ユーザー名とセッション時間がグレーアウトで表示されます</li>
                    <li>利用制限中のユーザー：プロフィール画像が制限アイコンに変更されます</li>
                </ul>
                <p class="note-text">利用制限中のユーザーとのセッションは自動的にキャンセルされます。</p>
            </div>
        </div>

        <div class="step-item">
            <h3 data-step="3">2shotの開始</h3>
            <p>スケジュールされた時間になったら、以下の手順で2shotを開始します。</p>
            <ol class="step-instructions">
                <li>スケジュール一覧で該当の日程を選択</li>
                <li>画面下部にあるボタンをタップ</li>
                <li>最初のファンとの開始時間になったら、自動的に開始されます</li>
            </ol>
            <p>チケットを購入したファンは、購入した時間までに待機画面にいた場合は自動で入室します。各セッションの終了時には、ファンは自動で退室し、次のファンが入室します。この流れは、予定されたすべてのセッションが終了するまで自動的に進行します。</p>
            <div class="info-box">
                <h4>ボタンの表示について</h4>
                <p>画面下部のボタンは、セッションの状態によって以下のように表示が変わります：</p>
                <ul>
                    <li>「入室する」 ： 開始時間になっているセッションがある場合</li>
                    <li>「開始準備」 ： まだ開始時間になっていないセッションの場合</li>
                </ul>
                <p class="note-text">「入室する」の状態でタップした場合は、すぐにファンと接続されます。</p>
            </div>

            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_04.png' %}" alt="ステップ3の説明画像" class="step-image">
            </div>
            <div class="step-image-container">
                <img src="{% static 'front/img/functional_specs/specs_28.png' %}" alt="ステップ3の説明画像" class="step-image">
            </div>
        </div>

    <!-- 2shotのヒント -->
    <div class="spec-tips">
        <h3>2shot後のフォローアップ</h3>
        <ul>
            <li>参加したファンへのお礼のメッセージを送ることで、さらなる関係強化につながります。</li>
            <li>ファンとの対話を楽しみ、個別の体験を提供することを心がけましょう。</li>
        </ul>
    </div>

    <!-- 機能説明ナビゲーション -->
    <div class="spec-navigation">
        <!-- 前後の記事リンク -->
        <div class="spec-nav-links">
            <a href="{% url 'front:dm' %}" class="spec-nav-link prev">
                <span class="nav-label">前の記事</span>
                <span class="nav-title">DM機能</span>
            </a>
            <a href="{% url 'front:moderation' %}" class="spec-nav-link next">
                <span class="nav-label">次の記事</span>
                <span class="nav-title">モデレーション機能</span>
            </a>
        </div>
        {% include 'front/functional_specs/_spec_list.html' %}
    </div>
</div>

{% endblock %}
